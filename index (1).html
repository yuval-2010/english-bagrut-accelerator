<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>English Bagrut Accelerator</title>
  <style>
    :root{
      --bg:#0e0f13;--card:#171923;--muted:#2a2f3a;--ink:#f6f7fb;--brand:#2f80ed;--accent:#21c37a;--warn:#ff6b6b;
      --ink-dim:#b8c2d8;--link:#9fd1ff
    }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"}
    .container{max-width:1024px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;background:linear-gradient(180deg,rgba(14,15,19,.95),rgba(14,15,19,.70));backdrop-filter: blur(6px);z-index:5}
    h1{margin:0;font-size:1.6rem}
    h2{margin:0 0 .5rem}
    .sub{color:var(--ink-dim);font-size:.95rem}
    .grid{display:grid;gap:12px}
    .grid-3{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .card{background:var(--card);border:1px solid var(--muted);border-radius:16px;padding:16px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid var(--muted);background:#131623;color:var(--ink-dim);font-size:.85rem}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid transparent;background:var(--brand);color:#fff;text-decoration:none;cursor:pointer}
    .btn.secondary{background:#394056}
    .btn.ghost{background:transparent;border-color:var(--muted);color:var(--ink)}
    .btn.full{width:100%}
    a{color:var(--link)}
    footer{color:var(--ink-dim)}
    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;background:#11141c;border:1px solid var(--muted);border-radius:6px;padding:2px 6px}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .space{height:10px}
    /* Flashcards */
    .flash{min-height:220px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}
    .big{font-size:2rem;font-weight:700;letter-spacing:.5px}
    .muted{color:var(--ink-dim)}
    .actions{display:flex;gap:8px;justify-content:center;margin-top:12px;flex-wrap:wrap}
    .list{display:grid;gap:8px}
    .item{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-radius:12px;background:#141722;border:1px solid var(--muted)}
    .badge{display:inline-block;padding:2px 8px;border-radius:10px;background:#1f2430;border:1px solid var(--muted);font-size:.8rem;color:var(--ink-dim)}
    .hint{font-size:.9rem;color:var(--ink-dim)}
    .sticky-tabs{position:sticky;top:62px;z-index:4;background:linear-gradient(180deg,rgba(14,15,19,.9),rgba(14,15,19,.7));backdrop-filter: blur(6px);padding:8px;border-bottom:1px solid var(--muted)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{padding:8px 12px;border-radius:999px;border:1px solid var(--muted);cursor:pointer}
    .tab.active{background:var(--brand);color:#fff;border-color:transparent}
    .progress{height:10px;background:#121522;border:1px solid var(--muted);border-radius:999px;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,var(--brand),#7cc3ff)}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}
  </style>
</head>
<body>
  <header>
    <div class="container" style="display:flex;gap:12px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap">
      <div>
        <h1>English Bagrut Accelerator</h1>
        <div class="sub">מסלול מואץ לבגרות באנגלית — 3/4/5 יח"ל</div>
      </div>
      <nav id="top-nav" class="row"></nav>
    </div>
  </header>

  <main id="app" class="container" aria-live="polite"></main>

  <footer class="container" style="padding-bottom:40px">
    <span>פותח ע"י לירן מיכאלי</span>
  </footer>

  <script>
  // ===== Data (single-file) =====
  const SYLLABUS = {
    '3u': {
      title: '3 יח"ל',
      what: [
        'אוצר מילים בסיסי + נושאים נפוצים: School, Health, Technology',
        'דקדוק ליבה: Present/Past/Future Simple, שאלות ושלילה',
        'קריאה: פסקאות קצרות עם שאלות הבנה',
        'כתיבה: משפט פשוט, חיבור קצר (60–80 מילים)'
      ],
      how: [
        'לומדים 10–15 מילים חדשות ביום בכרטיסיות',
        'תרגול קריאה יומי (5–10 דקות) וטקסט אחד ארוך בשבוע',
        'שחזור דקדוק בסיסי עם דפי עבודה קצרים',
        'כתיבת חיבור קצר פעמיים בשבוע + משוב עצמי (צ׳ק־ליסט)'
      ]
    },
    '4u': {
      title: '4 יח"ל',
      what: [
        'אוצר מילים ביניים + צירופי לשון',
        'דקדוק: Perfect tenses, Conditionals 0–2, Modals',
        'קריאה: טקסטים עיתונאיים ואקדמיים קצרים',
        'כתיבה: חיבור מובנה (120–140 מילים), מכתב רשמי'
      ],
      how: [
        'סשן כרטיסיות 15–20 דקות ביום + חזרה מרווחת (SRS)',
        'פעמיים בשבוע טקסט בסגנון בגרות עם ניתוח טעויות',
        'תרגול כתיבה מונחה אחת לשבוע + צ׳ק־ליסט בגרות',
        'דיבור: סיכום בעל־פה של טקסט (2–3 דק׳)'
      ]
    },
    '5u': {
      title: '5 יח"ל',
      what: [
        'אוצר מילים מתקדם + Collocations ואידיומים',
        'דקדוק: Conditionals 3 & Mixed, Passive/Reported Speech',
        'קריאה: מאמרים מורכבים, ניתוח טיעונים',
        'כתיבה: Opinion/Argumentative (160–180 מילים)'
      ],
      how: [
        'SRS יומי (כרטיסיות) + חזרות קצרות לאורך היום',
        '3–4 טקסטים בסגנון בגרות בשבוע עם מדדי זמן ודיוק',
        'כתיבה שבועית + ביקורת מבנית לפי rubrics',
        'דיבור: פרפראזה + הרחבת תשובות (PEEL)'
      ]
    }
  };

  // Sample vocabulary (extendable). You can paste more items; the app handles any size.
  const VOCAB = [
    { w:'achieve', t:'להשיג', ex:'You can achieve your goals with consistent practice.' },
    { w:'analyze', t:'לנתח', ex:'Students must analyze the text and explain the main idea.' },
    { w:'argument', t:'טיעון', ex:'His argument was supported by strong evidence.' },
    { w:'aspect', t:'היבט', ex:'One aspect of the story is its historical context.' },
    { w:'assume', t:'להניח', ex:'Do not assume the answer; find proof.' },
    { w:'benefit', t:'תועלת', ex:'Reading daily has many benefits.' },
    { w:'challenge', t:'אתגר', ex:'Preparing for the exam is a challenge you can overcome.' },
    { w:'compare', t:'להשוות', ex:'Compare the two articles and find differences.' },
    { w:'complete', t:'להשלים', ex:'Complete the assignment by Monday.' },
    { w:'conclusion', t:'מסקנה', ex:'The conclusion summarizes the main points.' },
    { w:'consider', t:'לשקול', ex:'Consider the writer\'s purpose when reading.' },
    { w:'create', t:'ליצור', ex:'Create an outline before you write.' },
    { w:'define', t:'להגדיר', ex:'Define the term using your own words.' },
    { w:'describe', t:'לתאר', ex:'Describe the character\'s feelings.' },
    { w:'develop', t:'לפתח', ex:'Develop your ideas with examples.' },
    { w:'effect', t:'השפעה', ex:'What is the effect of this change?' },
    { w:'evidence', t:'ראיה', ex:'Use evidence from the text to support your answer.' },
    { w:'explain', t:'להסביר', ex:'Explain why the author chose this title.' },
    { w:'factor', t:'גורם', ex:'Time is an important factor in success.' },
    { w:'focus', t:'להתרכז', ex:'Focus on understanding the main idea.' },
    { w:'improve', t:'לשפר', ex:'Practice speaking to improve your fluency.' },
    { w:'include', t:'לכלול', ex:'Include at least two examples.' },
    { w:'increase', t:'להגדיל', ex:'Reading will increase your vocabulary.' },
    { w:'infer', t:'להסיק', ex:'Infer the character\'s feelings from his actions.' },
    { w:'issue', t:'נושא/בעיה', ex:'The article discusses an important social issue.' },
    { w:'main idea', t:'רעיון מרכזי', ex:'Identify the main idea of the passage.' },
    { w:'opinion', t:'דעה', ex:'Write your opinion and support it.' },
    { w:'prove', t:'להוכיח', ex:'Prove your claims with evidence.' },
    { w:'purpose', t:'מטרה', ex:'What is the author\'s purpose?' },
    { w:'reason', t:'סיבה', ex:'Give one reason for your answer.' },
    { w:'result', t:'תוצאה', ex:'The result was better than expected.' },
    { w:'suggest', t:'להציע', ex:'Suggest a different ending.' },
    { w:'support', t:'לתמוך', ex:'Support your answer with examples.' },
    { w:'therefore', t:'לפיכך', ex:'He studied; therefore, he succeeded.' },
    { w:'variety', t:'מגוון', ex:'Read a variety of texts every week.' },
  ];

  // ===== Persistence helpers =====
  const store = {
    get(k, def){ try{ return JSON.parse(localStorage.getItem(k)) ?? def }catch{ return def } },
    set(k, v){ localStorage.setItem(k, JSON.stringify(v)) },
    push(k, v){ const arr = store.get(k, []); arr.push(v); store.set(k, arr) },
    remove(k, pred){ const arr = store.get(k, []); const next = arr.filter(x=>!pred(x)); store.set(k,next) }
  };

  // ===== Router (hash-based) =====
  const routes = {};
  function route(path, handler){ routes[path] = handler }
  function go(path){ if(location.hash!==`#${path}`) location.hash = `#${path}`; else render() }
  window.addEventListener('hashchange', render);

  // ===== UI helpers =====
  const $app = document.getElementById('app');
  const $nav = document.getElementById('top-nav');
  function el(tag, attrs={}, children=[]) {
    const node = document.createElement(tag);
    for(const [k,v] of Object.entries(attrs||{})) {
      if(k==='class') node.className = v; else if(k.startsWith('on')) node.addEventListener(k.slice(2), v); else if(k==='html') node.innerHTML=v; else node.setAttribute(k,v)
    }
    for(const c of (children||[])) node.append(c);
    return node;
  }
  function clear(node){ node.replaceChildren() }

  // ===== Nav =====
  function nav(){
    clear($nav)
    $nav.append(
      btn('מסלולים', ()=>go('/')),
      btn('אוצר מילים', ()=>go('/vocab')),
      btn('המילים שלי', ()=>go('/mywords')),
      btn('קריאה', ()=>go('/reading')),
    )
  }
  function btn(label, onclick, cls='btn ghost'){ const b = el('button',{class:cls, onclick}); b.textContent=label; return b }

  // ===== Pages =====
  route('/', () => {
    nav();
    const hero = el('div',{class:'card'},[
      el('h2',{},['בחרו מסלול: 3 / 4 / 5 יח"ל']),
      el('div',{class:'sub'},['לאחר הבחירה יוצג מה לומדים, איך מתכוננים, וקישורים מהירים לתרגול.'])
    ]);

    const grid = el('div',{class:'grid grid-3'});
    [['3u','3 יח"ל','יסודות חזקים'],['4u','4 יח"ל','העמקה וביטחון'],['5u','5 יח"ל','שליטה מלאה']]
      .forEach(([key,title,subtitle])=>{
        grid.append(el('div',{class:'card'},[
          el('div',{class:'pill'},[subtitle]),
          el('h3',{},[title]),
          el('div',{class:'hint'},['תוכנית ממוקדת לפי דרישות המבחן']),
          el('div',{class:'space'}),
          btn('פתח מסלול', ()=>go(`/track/${key}`),'btn full')
        ]))
      })

    clear($app); $app.append(hero, grid);
  });

  route('/track/:id', ({params})=>{
    nav();
    const data = SYLLABUS[params.id];
    if(!data){ go('/'); return }

    const title = el('div',{class:'card'},[
      el('h2',{},[data.title]),
      el('div',{class:'sub'},['מה בתוכנית + איך להתכונן בפועל'])
    ]);

    const what = el('div',{class:'card'},[
      el('h3',{},['מה לומדים']),
      list(data.what)
    ]);

    const how = el('div',{class:'card'},[
      el('h3',{},['איך מתכוננים']),
      list(data.how),
      el('div',{class:'actions'},[
        btn('אוצר מילים', ()=>go('/vocab')),
        btn('המילים שלי', ()=>go('/mywords'), 'btn secondary'),
        btn('תרגול קריאה', ()=>go('/reading'), 'btn ghost')
      ])
    ]);

    clear($app); $app.append(title, what, how);
  });

  function list(items){
    const ul = el('ul',{class:'list'});
    items.forEach(txt=>{
      const li = el('li',{class:'item'},[
        el('span',{},[txt]),
        el('span',{class:'badge'},['לבגרות'])
      ]);
      ul.append(li);
    })
    return ul;
  }

  // ===== Vocabulary Trainer =====
  let state = {
    idx: 0,
    seen: 0,
    known: 0,
  };

  function nextIndex(){
    // endless loop: pseudo-random walk through VOCAB
    state.idx = (state.idx + 1 + Math.floor(Math.random()*3)) % VOCAB.length;
    state.seen++;
  }

  route('/vocab', ()=>{
    nav();
    clear($app);

    const wordObj = VOCAB[state.idx];

    const top = el('div',{class:'sticky-tabs'},[
      progressBar(),
      el('div',{class:'tabs'},[
        tabBtn('כרטיסיות', true, ()=>{}),
        tabBtn('המילים שלי', false, ()=>go('/mywords')),
        tabBtn('הגדרות', false, ()=>go('/settings')),
      ])
    ]);

    const card = el('div',{class:'card flash'},[
      el('div',{class:'big',id:'flash-word'},[wordObj.w]),
      el('div',{class:'muted'},['לחץ לא יודע כדי לראות תרגום ומשפט'])
    ]);

    const actions = el('div',{class:'actions'},[
      btn('יודע', ()=>{
        state.known++; nextIndex(); go('/vocab')
      }, 'btn'),
      btn('לא יודע', ()=>{
        // save to myWords and go to details
        addToMyWords(wordObj);
        go(`/word/${encodeURIComponent(wordObj.w)}`);
      }, 'btn secondary'),
      btn('דילוג', ()=>{ nextIndex(); go('/vocab') }, 'btn ghost')
    ]);

    $app.append(top, card, actions);
  });

  function addToMyWords(w){
    const list = store.get('myWords', []);
    if(!list.find(x=>x.w===w.w)){
      store.push('myWords', w);
    }
  }

  function progressBar(){
    const pct = Math.min(100, Math.round((state.known / Math.max(1,state.seen)) * 100));
    const wrap = el('div', {class:'row', style:'gap:12px;align-items:center'});
    const p = el('div',{class:'progress', style:'width:220px'}, [el('span',{style:`width:${pct}%`})]);
    wrap.append(el('span',{class:'badge'},[`דיוק: ${isNaN(pct)?0:pct}%`]), p);
    return wrap;
  }

  function tabBtn(label, active, on){
    const b = el('button',{class:'tab'+(active?' active':''), onclick:on}); b.textContent=label; return b;
  }

  // Word details page
  route('/word/:w', ({params})=>{
    nav();
    const w = decodeURIComponent(params.w);
    const entry = VOCAB.find(x=>x.w===w) || store.get('myWords',[]).find(x=>x.w===w);
    if(!entry){ go('/vocab'); return }

    const c = el('div',{class:'card'},[
      el('h2',{},[entry.w]),
      el('div',{class:'hint'},[`תרגום: ${entry.t}`]),
      el('div',{style:'margin-top:8px'},[el('strong',{},['במשפט: ']), document.createTextNode(entry.ex)])
    ]);

    const actions = el('div',{class:'actions'},[
      btn('חזרה לכרטיסיות', ()=>go('/vocab')),
      btn('סמן נלמדה והסר מהמילים שלי', ()=>{
        store.remove('myWords', x=>x.w===entry.w);
        go('/mywords');
      }, 'btn secondary')
    ]);

    clear($app); $app.append(c, actions);
  });

  // My Words page
  route('/mywords', ()=>{
    nav();
    clear($app);
    const items = store.get('myWords', []);

    const head = el('div',{class:'card'},[
      el('h2',{},['המילים שלי']),
      el('div',{class:'sub'},['מילים שסומנו כ"לא יודע" — לתרגול ממוקד'])
    ]);

    const listWrap = el('div',{class:'list'});
    if(items.length===0) listWrap.append(el('div',{class:'hint'},['אין עדיין מילים. היכנסו לכרטיסיות והוסיפו.']))
    items.forEach(x=>{
      const row = el('div',{class:'item'},[
        el('div',{},[el('strong',{},[x.w]), document.createTextNode(' — '+x.t)]),
        el('div',{class:'row'},[
          btn('פרטים', ()=>go(`/word/${encodeURIComponent(x.w)}`), 'btn ghost'),
          btn('סמן נלמדה', ()=>{ store.remove('myWords', m=>m.w===x.w); go('/mywords') }, 'btn secondary')
        ])
      ]);
      listWrap.append(row);
    })

    const actions = el('div',{class:'actions'},[
      btn('תרגל את כולן (כרטיסיות)', ()=>{
        // start a session that prioritizes myWords, then falls back to VOCAB
        const my = store.get('myWords', []);
        if(my.length){
          // temporarily replace order for session
          sessionWords = shuffle([...my]);
        } else {
          sessionWords = [];
        }
        go('/vocab-drill');
      })
    ]);

    $app.append(head, el('div',{class:'card'},[listWrap]), actions);
  });

  // Drill mode prioritizing myWords
  let sessionWords = [];
  route('/vocab-drill', ()=>{
    nav();
    clear($app);

    if(sessionWords.length===0){
      // if empty, fill with shuffled full VOCAB to make it feel endless
      sessionWords = shuffle([...VOCAB]);
    }
    const current = sessionWords[0];

    const card = el('div',{class:'card flash'},[
      el('div',{class:'big'},[current.w]),
      el('div',{class:'muted'},['לחץ לא יודע כדי לראות תרגום ומשפט'])
    ]);

    const actions = el('div',{class:'actions'},[
      btn('יודע', ()=>{ sessionWords.shift(); go('/vocab-drill') }),
      btn('לא יודע', ()=>{ addToMyWords(current); go(`/word/${encodeURIComponent(current.w)}`) }, 'btn secondary'),
      btn('יציאה', ()=>go('/mywords'), 'btn ghost')
    ]);

    $app.append(card, actions);
  });

  function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a }

  // Reading placeholder page (can be expanded later entirely in-file)
  route('/reading', ()=>{
    nav();
    clear($app);
    const head = el('div',{class:'card'},[
      el('h2',{},['תרגול קריאה (דמו)']),
      el('div',{class:'sub'},['קטעי קריאה קצרים בסגנון בגרות + שאלות הבנה'])
    ]);

    const sample = el('div',{class:'card'},[
      el('h3',{},['קטע: The Value of Daily Reading']),
      el('p',{},['Daily reading helps students improve vocabulary, writing skills, and critical thinking. Even 10 minutes a day can lead to visible progress. Students who read regularly tend to perform better in exams and feel more confident when speaking.']),
      el('div',{class:'list'},[
        q('1) What are two benefits of daily reading?', ['Improved vocabulary','Better writing skills']),
        q('2) How long should a student read to see progress?', ['About ten minutes a day']),
        q('3) Why do readers feel more confident when speaking?', ['Because they know more words and expressions'])
      ])
    ]);

    $app.append(head, sample);
  });

  function q(title, answers){
    const wrap = el('div',{class:'item'});
    wrap.append(el('div',{},[title]));
    const right = el('div');
    const show = btn('הצג תשובה', ()=>{
      show.disabled = true; right.textContent = ' תשובה: ' + answers.join('; ');
    }, 'btn ghost');
    wrap.append(el('div',{class:'row'},[show]), right);
    return wrap;
  }

  // ===== Simple param-aware renderer =====
  function match(path){
    const hash = location.hash.slice(1) || '/';
    const [p, q] = hash.split('?');
    const pathSeg = p.split('/').filter(Boolean);
    const routeSeg = path.split('/').filter(Boolean);
    if(routeSeg.length !== pathSeg.length) return null;
    const params={};
    for(let i=0;i<routeSeg.length;i++){
      const r = routeSeg[i]; const s = pathSeg[i];
      if(r.startsWith(':')) params[r.slice(1)] = decodeURIComponent(s);
      else if(r!==s) return null;
    }
    return {params};
  }

  function render(){
    for(const [path, handler] of Object.entries(routes)){
      const m = match(path);
      if(m){ handler(m); return }
    }
    // fallback
    routes['/']();
  }

  // bootstrap
  (function init(){ render() })();

  </script>
</body>
</html>
