<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boost English — האצת בגרות באנגלית (כיתה י׳)</title>
  <meta name="description" content="אתר האצה לבגרות באנגלית לתלמידי כיתה י׳: תרגול דקדוק, אוצר מילים, קריאה, כתיבה, והבנת הנקרא, עם מעקב התקדמות ותרגולים מהירים." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600;800&family=Rubik:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --card:#111827; /* gray-900 */
      --muted:#94a3b8; /* slate-400 */
      --text:#e5e7eb; /* gray-200 */
      --accent:#22d3ee; /* cyan-400 */
      --accent-2:#f472b6; /* pink-400 */
      --ok:#22c55e; --warn:#f59e0b; --err:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:"Heebo","Rubik",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      background: radial-gradient(1200px 600px at 80% -10%, #1e293b 0%, #0b1220 35%, var(--bg) 80%), var(--bg);
      color:var(--text); line-height:1.6;
    }
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;background:rgba(15,23,42,.7);backdrop-filter:blur(8px);border-bottom:1px solid #1f2937;z-index:50}
    .nav{display:flex;align-items:center;gap:16px;justify-content:space-between;padding:10px 24px}
    .brand{font-weight:800;letter-spacing:.2px}
    .brand .dot{color:var(--accent)}
    .nav a, .nav button{color:var(--text);text-decoration:none;font-weight:600;border:none;background:none;cursor:pointer}
    .nav .links{display:flex;gap:14px;flex-wrap:wrap}
    .btn{
      display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:9999px;
      background:linear-gradient(135deg,var(--accent),#60a5fa); color:#0b1220; font-weight:800; border:0;
      box-shadow:0 10px 24px rgba(34,211,238,.15), inset 0 0 0 1px rgba(255,255,255,.2);
      transition:transform .12s ease, box-shadow .2s ease;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(34,211,238,.22)}
    .hero{
      display:grid;grid-template-columns:1.2fr .8fr;gap:24px;align-items:center;margin-top:24px;
    }
    .hero-card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.07);
      border-radius:20px; padding:24px; box-shadow:0 20px 40px rgba(0,0,0,.25);
    }
    h1{font-size:clamp(28px,4vw,46px);margin:.2em 0 .3em 0}
    h2{font-size:clamp(22px,2.6vw,30px);margin:1.2em 0 .4em 0}
    h3{font-size:clamp(18px,2.2vw,24px);margin:1em 0 .4em 0}
    p.lead{font-size:clamp(16px,2.1vw,18px);color:var(--muted)}
    .grid{display:grid;gap:18px;grid-template-columns:repeat(12,1fr)}
    .col-12{grid-column:span 12}
    .col-6{grid-column:span 6}
    .col-4{grid-column:span 4}
    @media(max-width:900px){.hero{grid-template-columns:1fr}.col-6{grid-column:span 12}.col-4{grid-column:span 12}}
    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.07);
      border-radius:16px; padding:18px;
    }
    .tag{display:inline-block;padding:4px 10px;border-radius:9999px;background:rgba(255,255,255,.08); color:var(--accent); font-weight:700}
    .muted{color:var(--muted)}
    details summary{cursor:pointer;font-weight:800}
    .kudos{font-size:13px;color:var(--muted)}
    .pill{display:inline-block;padding:4px 10px;border:1px dashed rgba(255,255,255,.2);border-radius:9999px}
    .flex{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .list{margin:0;padding-right:18px}
    .checklist li{margin:6px 0}
    .progress{
      width:100%; height:10px; background:#0b1220; border-radius:9999px; overflow:hidden;
      border:1px solid rgba(255,255,255,.08);
    }
    .progress > div{height:100%;background:linear-gradient(90deg,var(--accent),#60a5fa);width:0%}
    .section-head{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .input, textarea{
      width:100%; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.15);
      background:rgba(255,255,255,.03); color:var(--text);
    }
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:12px}
    .footer{margin:38px 0 8px 0; color:var(--muted);font-size:14px}
    .small{font-size:13px}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:9999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .err{color:var(--err)}
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);margin:18px 0}
    .hidden{display:none}
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <div class="brand">Boost<span class="dot">•</span>English</div>
      <div class="links">
        <a href="#plan">תוכנית יומית</a>
        <a href="#grammar">דקדוק</a>
        <a href="#vocab">אוצר מילים</a>
        <a href="#reading">קריאה</a>
        <a href="#writing">כתיבה</a>
        <a href="#practice">תרגול</a>
        <a href="#faq">שאלות</a>
      </div>
      <button class="btn" id="saveProgressBtn">שמור התקדמות</button>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-card">
        <h1>האצת בגרות באנגלית (כיתה י׳) — קצר, ממוקד, עובד</h1>
        <p class="lead">האתר הזה מרכז לך את כל מה שצריך כדי לשפר אנגלית במהירות לבגרויות: תכל׳ס דקדוק, אוצר מילים של בגרות, הבנת הנקרא, וכתיבה — עם תרגולים קצרים ומעקב התקדמות.</p>
        <div class="flex" style="margin-top:8px">
          <span class="chip">⏱️ 30–45 ד׳ אימון ביום</span>
          <span class="chip">🎯 ממוקד 5 יח״ל / רמות שונות</span>
          <span class="chip">💾 נשמר אוטומטית במחשב שלך</span>
        </div>
        <div class="divider"></div>
        <div class="grid">
          <div class="col-6">
            <div class="small muted">ההתקדמות שלך</div>
            <div class="progress" aria-label="Progress"><div id="progressBar"></div></div>
            <div class="small muted" id="progressLabel">0% הושלם</div>
          </div>
          <div class="col-6">
            <label class="small muted" for="moodSelect">מה מתאים לך היום?</label>
            <select id="moodSelect" class="input">
              <option value="quick">מהיר (15–20 ד׳)</option>
              <option value="standard" selected>רגיל (30–45 ד׳)</option>
              <option value="deep">עמוק (60 ד׳+)</option>
            </select>
          </div>
        </div>
      </div>
      <div class="hero-card">
        <h2>איך משתמשים?</h2>
        <ol class="list">
          <li>בחר למטה נושאים — סמן ✔️ כשסיימת תרגול.</li>
          <li>שמור התקדמות (נשמר בדפדפן שלך).</li>
          <li>למד כתיבה דרך תבניות מוכנות + דוגמאות.</li>
          <li>בקריאה — תרגל עם שאלות והסברים.</li>
        </ol>
        <div style="margin-top:8px"><span class="tag">טיפ</span> כתיבה טובה = תבנית + אוצר מילים מדויק + קישוריות (linking words).</div>
      </div>
    </section>

    <section id="plan" class="card" style="margin-top:24px">
      <div class="section-head">
        <h2>תוכנית יומית ל־14 ימים</h2>
        <div class="flex">
          <span class="pill">אפשר לחזור על ימים קשים</span>
          <button class="btn" onclick="downloadStudyPlan()">הורד תכנית לימוד (.txt)</button>
        </div>
      </div>
      <div class="grid">
        <div class="col-6">
          <h3>שבוע 1 — בסיס חזק</h3>
          <ul class="list checklist">
            <li><label><input type="checkbox" data-task> יום 1: Present Simple / Progressive + 30 מילים נפוצות</label></li>
            <li><label><input type="checkbox" data-task> יום 2: Past Simple / Progressive</label></li>
            <li><label><input type="checkbox" data-task> יום 3: Present Perfect — שימושים, since/for</label></li>
            <li><label><input type="checkbox" data-task> יום 4: Future Forms (will / going to / present cont.)</label></li>
            <li><label><input type="checkbox" data-task> יום 5: Conditionals 0/1</label></li>
            <li><label><input type="checkbox" data-task> יום 6: Passive (Present/Past)</label></li>
            <li><label><input type="checkbox" data-task> יום 7: Writing — Opinion Paragraph + קישוריות</label></li>
          </ul>
        </div>
        <div class="col-6">
          <h3>שבוע 2 — האצה לבגרות</h3>
          <ul class="list checklist">
            <li><label><input type="checkbox" data-task> יום 8: Reported Speech (אמר→דווח)</label></li>
            <li><label><input type="checkbox" data-task> יום 9: Modals (must / have to / should / might)</label></li>
            <li><label><input type="checkbox" data-task> יום 10: Reading — אסטרטגיות + תרגול</label></li>
            <li><label><input type="checkbox" data-task> יום 11: Writing — Opinion Essay (מבנה מלא)</label></li>
            <li><label><input type="checkbox" data-task> יום 12: Writing — Formal Email / Complaint</label></li>
            <li><label><input type="checkbox" data-task> יום 13: Vocabulary — Education / Technology / Health</label></li>
            <li><label><input type="checkbox" data-task> יום 14: סימולציה קצרה + בדק-עצמי</label></li>
          </ul>
        </div>
      </div>
    </section>

    <section id="grammar" class="card" style="margin-top:24px">
      <h2>דקדוק — תכל׳ס מה שבאמת צריך</h2>
      <details open>
        <summary>⏱️ Present Simple vs. Present Progressive</summary>
        <p>Present Simple — הרגלים/עובדות: <em>I usually <b>study</b> in the evening.</em><br>
           Present Progressive — קורה עכשיו/זמני: <em>I am <b>studying</b> for the test.</em></p>
        <ul class="list">
          <li>מילות זמן אופייניות: <span class="pill">always / usually / often / sometimes / never</span>, <span class="pill">now / at the moment</span></li>
          <li>טעויות נפוצות: שכחת <span class="kbd">-s</span> בגוף שלישי: <em>He <b>plays</b></em>.</li>
        </ul>
        <div class="divider"></div>
        <button class="btn" onclick="startQuiz('present')">תרגול מהיר (5 שאלות)</button>
        <div id="quiz-present" class="small"></div>
      </details>

      <details>
        <summary>🕰️ Past Simple vs. Past Progressive</summary>
        <p>Past Simple — פעולה שהסתיימה בעבר: <em>Yesterday I <b>went</b> to school.</em><br>
           Past Progressive — פעולה ממושכת שהופרעה: <em>I <b>was walking</b> when it started to rain.</em></p>
        <button class="btn" onclick="startQuiz('past')">תרגול מהיר</button>
        <div id="quiz-past" class="small"></div>
      </details>

      <details>
        <summary>✅ Present Perfect (since/for, just/already/yet)</summary>
        <p>חיבור עבר להווה: <em>I have <b>lived</b> here for five years.</em> / <em>She has <b>just finished</b> her homework.</em></p>
        <button class="btn" onclick="startQuiz('perfect')">תרגול מהיר</button>
        <div id="quiz-perfect" class="small"></div>
      </details>

      <details>
        <summary>🔮 Future Forms — will / going to / present cont.</summary>
        <ul class="list">
          <li><b>will</b>: החלטה רגעית/תחזית: <em>I think it will rain.</em></li>
          <li><b>going to</b>: כוונה/סימנים: <em>We are going to visit Grandma.</em></li>
          <li><b>present continuous</b>: תכנון עם זמן: <em>I am meeting Tom at 5.</em></li>
        </ul>
      </details>

      <details>
        <summary>🧩 Conditionals 0/1/2</summary>
        <ul class="list">
          <li><b>Zero:</b> עובדה כללית: <em>If you heat ice, it melts.</em></li>
          <li><b>First:</b> עתיד אפשרי: <em>If I study, I will pass.</em></li>
          <li><b>Second:</b> דמיון/לא מציאותי: <em>If I had more time, I would watch the game.</em></li>
        </ul>
      </details>

      <details>
        <summary>🛠️ Passive (סביל) — קצר ולעניין</summary>
        <p>מבנה: <em>be + V3</em>. דוגמה: <em>The test <b>was written</b> yesterday.</em></p>
      </details>

      <details>
        <summary>🗣️ Reported Speech — דיבור עקיף</summary>
        <p>He said, “I am tired.” → He said (that) he <b>was</b> tired. שינויי זמנים, כינויי גוף וזמן.</p>
      </details>

      <details>
        <summary>⚙️ Modals — must / have to / should / might</summary>
        <p><b>must</b> (חובה פנימית), <b>have to</b> (חובה חיצונית), <b>should</b> (המלצה), <b>might</b> (אפשרות).</p>
      </details>
    </section>

    <section id="vocab" class="card" style="margin-top:24px">
      <div class="section-head">
        <h2>אוצר מילים — לפי נושאי בגרות</h2>
        <input id="vocabSearch" class="input" placeholder="חפש מילה באנגלית או בעברית... (education, טכנולוגיה, בריאות)">
      </div>
      <div id="vocabList" class="grid" style="margin-top:12px"></div>
      <div class="small muted">טיפ: כתוב משפט משלך לכל מילה חדשה. הסמן ⭐ לשמירה ברשימת ה־Favorites למטה.</div>
      <details style="margin-top:10px">
        <summary>⭐ המועדפים שלי</summary>
        <ul id="favList" class="list"></ul>
      </details>
    </section>

    <section id="reading" class="card" style="margin-top:24px">
      <h2>קריאה והבנת הנקרא — טקסטים קצרים עם שאלות</h2>
      <details open>
        <summary>טקסט 1 — Teens & Sleep (B1-B2)</summary>
        <p class="muted small">קרא/י את הטקסט וענה/י על השאלות.</p>
        <article id="text1" class="card">
          <p>
            Many teenagers feel tired during the school day. One reason is that their natural body clock
            makes them fall asleep late. Experts say that schools should start later so students can get
            enough sleep. When teens sleep at least eight hours, they concentrate better, make fewer
            mistakes, and feel less stressed.
          </p>
        </article>
        <div class="divider"></div>
        <ol class="list" id="text1-qs">
          <li>Why do many teenagers feel tired during the school day?</li>
          <li>What do experts suggest schools should do?</li>
          <li>Name one benefit of getting enough sleep.</li>
        </ol>
        <button class="btn" onclick="toggleAnswers('ans1')">הראה/הסתר תשובות</button>
        <ul id="ans1" class="list small hidden">
          <li>Because their body clock makes them fall asleep late.</li>
          <li>Start later.</li>
          <li>Better concentration / fewer mistakes / less stress.</li>
        </ul>
      </details>

      <details>
        <summary>טקסט 2 — Social Media & Kindness (B1)</summary>
        <article class="card">
          <p>
            Social media can spread negative messages quickly, but it can also be a powerful tool for
            kindness. Some schools run campaigns where students share one compliment a day. These
            small messages create a friendlier atmosphere and reduce bullying.
          </p>
        </article>
        <button class="btn" onclick="toggleAnswers('ans2')">הראה/הסתר תשובות</button>
        <ul id="ans2" class="list small hidden">
          <li>It can spread negativity, but also kindness.</li>
          <li>Schools run campaigns to share compliments.</li>
          <li>Friendlier atmosphere, less bullying.</li>
        </ul>
      </details>
    </section>

    <section id="writing" class="card" style="margin-top:24px">
      <h2>כתיבה — תבניות מוכנות (Templates)</h2>
      <details open>
        <summary>📝 Opinion Essay — מתכונת לבגרות</summary>
        <p><b>מבנה:</b> Introduction → 2 Body Paragraphs → Conclusion</p>
        <div class="card">
<pre class="small">
<strong>Topic:</strong> Should schools start later in the morning?
<strong>Introduction:</strong>
In my opinion, schools should start later. This change could improve students’ health and academic results.
<strong>Body 1:</strong>
First, teenagers need more sleep. When they sleep enough, they can focus and learn better.
<strong>Body 2:</strong>
Second, a later start reduces stress. Students arrive more relaxed and ready for the day.
<strong>Conclusion:</strong>
To sum up, starting school later would help students succeed. Therefore, schools should consider this change.
</pre>
        </div>
        <label for="writer" class="small muted">כתוב/כתבי פסקה משלך כאן (נשמר מקומית):</label>
        <textarea id="writer" rows="6" placeholder="כתוב כאן..."></textarea>
        <div class="flex" style="margin-top:8px">
          <button class="btn" onclick="saveWriting()">שמור</button>
          <span id="saveStatus" class="small muted"></span>
        </div>
      </details>

      <details>
        <summary>📧 Formal Email — תלונה/בקשה</summary>
<pre class="small">
Subject: Complaint about the service
Dear Sir or Madam,
I am writing to complain about the service I received on (date). Unfortunately, ...
I would appreciate a refund/replacement. Please contact me at ...
Sincerely,
(Your name)
</pre>
      </details>

      <details>
        <summary>📚 Book/Film Review — קצר וקולע</summary>
<pre class="small">
Title: ...
Genre: ...
Summary (2–3 sentences): ...
Opinion: I enjoyed/did not enjoy ... because ...
Recommendation: I (highly) recommend it to ...
</pre>
      </details>
    </section>

    <section id="practice" class="card" style="margin-top:24px">
      <div class="section-head">
        <h2>תרגול מהיר — בחנים לבדיקה עצמית</h2>
        <div class="flex">
          <button class="btn" onclick="startMixedQuiz()">בחן מעורב (10 שאלות)</button>
          <span class="pill">תוצאה נשמרת מקומית</span>
        </div>
      </div>
      <div id="quiz-mixed" class="small"></div>
    </section>

    <section id="faq" class="card" style="margin-top:24px">
      <h2>שאלות נפוצות</h2>
      <details>
        <summary>איך מתקדמים הכי מהר?</summary>
        <p>30–45 דקות ביום: דקדוק אחד + 10–15 מילים + תרגול כתיבה קצר. פעם ביומיים — קריאה עם שאלות.</p>
      </details>
      <details>
        <summary>האם אפשר להשתמש בזה לנבחני 5 יח״ל?</summary>
        <p>כן. התרגולים והכתיבה מותאמים לרמות שונות; לרמת 5 יח״ל השקענו ב־Opinion Essay ותבניות פורמליות.</p>
      </details>
      <details>
        <summary>האם צריך אינטרנט?</summary>
        <p>הדף הוא קובץ אחד. אפשר לשמור כ־PDF/HTML ולהשתמש גם בלי אינטרנט (חלק מהפיצ׳רים עובדים מקומית).</p>
      </details>
    </section>

    <div class="footer">
      נבנה עבור תלמידי כיתה י׳ — מאיץ לבגרות באנגלית. גרסה 1.0 • © 2025 Boost English
    </div>
  </main>

  <script>
    // === Local Storage Helpers ===
    const LS_KEYS = {
      TASKS: 'be_tasks_v1',
      WRITING: 'be_writing_v1',
      FAVS: 'be_voc_favs_v1',
      SCORE: 'be_score_v1'
    };

    // === Progress & Tasks ===
    const tasks = Array.from(document.querySelectorAll('[data-task]'));
    function loadTasks(){
      try{
        const saved = JSON.parse(localStorage.getItem(LS_KEYS.TASKS) || '[]');
        tasks.forEach((cb,i)=> cb.checked = !!saved[i]);
      }catch{}
      updateProgress();
    }
    function saveTasks(){
      const state = tasks.map(cb=>cb.checked);
      localStorage.setItem(LS_KEYS.TASKS, JSON.stringify(state));
      updateProgress(true);
    }
    function updateProgress(jump){
      const total = tasks.length;
      const done = tasks.filter(cb=>cb.checked).length;
      const pct = Math.round((done/total)*100);
      document.getElementById('progressBar').style.width = pct + '%';
      document.getElementById('progressLabel').textContent = pct + '% הושלם';
      if(jump) scrollTo({top:0,behavior:'smooth'});
    }
    tasks.forEach(cb=> cb.addEventListener('change', saveTasks));
    document.getElementById('saveProgressBtn').addEventListener('click', saveTasks);

    // === Study Plan Download ===
    function downloadStudyPlan(){
      const lines = [
        'Boost English — תוכנית 14 ימים',
        'שבוע 1: Present, Past, Perfect, Future, Conditionals 0/1, Passive, Opinion Paragraph',
        'שבוע 2: Reported, Modals, Reading, Opinion Essay, Formal Email, Vocabulary, סימולציה',
        'יומי: 30–45 ד׳ — דקדוק 1 + 10–15 מילים + כתיבה קצרה + תרגול קריאה'
      ];
      const blob = new Blob([lines.join('\n')], {type:'text/plain;charset=utf-8'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='study-plan-14d.txt'; a.click();
    }

    // === Vocabulary ===
    const VOCAB = [
      // education
      {en:'curriculum', he:'תכנית לימודים', topic:'education'},
      {en:'assignment', he:'מטלה', topic:'education'},
      {en:'grade', he:'ציון / כיתה', topic:'education'},
      {en:'improve', he:'לשפר', topic:'education'},
      {en:'efficient', he:'יעיל', topic:'education'},
      // technology
      {en:'device', he:'מכשיר', topic:'technology'},
      {en:'update', he:'עדכון', topic:'technology'},
      {en:'access', he:'גישה', topic:'technology'},
      {en:'privacy', he:'פרטיות', topic:'technology'},
      {en:'influence', he:'השפעה', topic:'technology'},
      // health
      {en:'balanced diet', he:'תזונה מאוזנת', topic:'health'},
      {en:'exercise', he:'התעמלות', topic:'health'},
      {en:'stress', he:'לחץ', topic:'health'},
      {en:'benefit', he:'תועלת', topic:'health'},
      {en:'reduce', he:'להפחית', topic:'health'},
      // general
      {en:'opinion', he:'דעה', topic:'general'},
      {en:'evidence', he:'ראיה/הוכחה', topic:'general'},
      {en:'recommend', he:'להמליץ', topic:'general'},
      {en:'compare', he:'להשוות', topic:'general'},
      {en:'contrast', he:'לנגד/להבחין', topic:'general'}
    ];
    const vocabList = document.getElementById('vocabList');
    const favKey = LS_KEYS.FAVS;
    function renderVocab(filter=''){
      vocabList.innerHTML='';
      const favs = new Set(JSON.parse(localStorage.getItem(favKey) || '[]'));
      VOCAB.filter(v=> (v.en+v.he+v.topic).toLowerCase().includes(filter.toLowerCase()))
           .forEach(v=>{
             const card = document.createElement('div'); card.className='card col-4';
             const fav = document.createElement('button'); fav.className='btn'; fav.style.padding='6px 10px';
             const isFav = favs.has(v.en);
             fav.textContent = isFav ? '⭐' : '☆';
             fav.title = isFav ? 'הסר מהמועדפים' : 'הוסף למועדפים';
             fav.onclick = ()=>{
               const set = new Set(JSON.parse(localStorage.getItem(favKey) || '[]'));
               if(set.has(v.en)) set.delete(v.en); else set.add(v.en);
               localStorage.setItem(favKey, JSON.stringify([...set]));
               renderVocab(document.getElementById('vocabSearch').value);
               renderFavs();
             };
             card.innerHTML = `<div class="flex"><span class="tag">${v.topic}</span>${fav.outerHTML}</div>
                               <h3 style="margin-top:6px">${v.en}</h3>
                               <div class="muted">${v.he}</div>`;
             vocabList.appendChild(card);
           });
    }
    function renderFavs(){
      const favs = JSON.parse(localStorage.getItem(favKey) || '[]');
      const ul = document.getElementById('favList'); ul.innerHTML='';
      favs.forEach(en=>{
        const li = document.createElement('li'); li.textContent = en;
        ul.appendChild(li);
      });
    }
    document.getElementById('vocabSearch').addEventListener('input', e=> renderVocab(e.target.value));
    renderVocab(''); renderFavs();

    // === Writing Save ===
    function saveWriting(){
      const val = document.getElementById('writer').value.trim();
      localStorage.setItem(LS_KEYS.WRITING, val);
      document.getElementById('saveStatus').textContent = 'נשמר!';
      setTimeout(()=> document.getElementById('saveStatus').textContent='', 1500);
    }
    (function loadWriting(){
      const val = localStorage.getItem(LS_KEYS.WRITING) || '';
      document.getElementById('writer').value = val;
    })();

    // === Reading helpers ===
    function toggleAnswers(id){
      const el = document.getElementById(id);
      el.classList.toggle('hidden');
    }

    // === Quizzes ===
    const QBANK = {
      present: [
        {q:'Choose the correct form: He usually ___ (go) to school by bus.', a:'goes', choices:['go','goes','is going']},
        {q:'Right now, they ___ (study) for the test.', a:'are studying', choices:['study','are studying','studies']},
        {q:'I ___ (not like) coffee.', a:'do not like', choices:['am not liking','do not like','not like']},
        {q:'Listen! The teacher ___ (speak).', a:'is speaking', choices:['speaks','is speaking','speak']},
        {q:'She ___ (always / be) on time.', a:'is always', choices:['always is','is always','are always']}
      ],
      past: [
        {q:'Yesterday I ___ (walk) to school.', a:'walked', choices:['walk','walked','was walking']},
        {q:'I ___ (walk) when it started to rain.', a:'was walking', choices:['walked','was walking','am walking']},
        {q:'They ___ (not see) the movie last night.', a:'did not see', choices:['do not see','did not saw','did not see']},
        {q:'While she ___ (cook), the phone rang.', a:'was cooking', choices:['cooked','was cooking','is cooking']},
        {q:'We ___ (be) tired after the trip.', a:'were', choices:['was','were','are']}
      ],
      perfect: [
        {q:'I ___ (live) here for five years.', a:'have lived', choices:['lived','have lived','has lived']},
        {q:'She ___ (just / finish) her homework.', a:'has just finished', choices:['has just finish','just finished','has just finished']},
        {q:'They ___ (already / see) that film.', a:'have already seen', choices:['already saw','have already seen','seen already']},
        {q:'He ___ (not / do) it yet.', a:'has not done', choices:['has not did','did not done','has not done']},
        {q:'We ___ (be) friends since 2019.', a:'have been', choices:['were','have been','has been']}
      ]
    };

    function startQuiz(section){
      const el = document.getElementById('quiz-' + section);
      const qs = QBANK[section];
      renderQuiz(el, qs, 5);
    }

    function startMixedQuiz(){
      const all = [...QBANK.present, ...QBANK.past, ...QBANK.perfect];
      // simple shuffle
      for (let i = all.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [all[i], all[j]] = [all[j], all[i]]; }
      renderQuiz(document.getElementById('quiz-mixed'), all.slice(0,10), 10);
    }

    function renderQuiz(container, questions, max){
      container.innerHTML='';
      const form = document.createElement('form');
      questions.slice(0,max).forEach((item, idx)=>{
        const block = document.createElement('div'); block.className='card'; block.style.marginTop='10px';
        const h = document.createElement('div'); h.textContent = (idx+1)+'. '+item.q; block.appendChild(h);
        item.choices.forEach(ch=>{
          const id = 'q'+idx+'_'+ch.replace(/\\W+/g,'_');
          const label = document.createElement('label'); label.style.display='block'; label.style.margin='6px 0';
          const input = document.createElement('input'); input.type='radio'; input.name='q'+idx; input.value=ch; input.id=id;
          label.appendChild(input);
          const span = document.createElement('span'); span.textContent=' '+ch;
          label.appendChild(span);
          block.appendChild(label);
        });
        form.appendChild(block);
      });
      const submit = document.createElement('button'); submit.type='submit'; submit.className='btn'; submit.textContent='בדוק';
      form.appendChild(document.createElement('div')).appendChild(submit);
      form.addEventListener('submit', e=>{
        e.preventDefault();
        let correct=0, total=questions.length;
        questions.forEach((item, idx)=>{
          const chosen = (new FormData(form)).get('q'+idx);
          const block = form.children[idx];
          const result = document.createElement('div'); result.className='small';
          if(chosen === item.a){ correct++; result.innerHTML='<span class="ok">✔️ נכון</span>'; }
          else{ result.innerHTML='<span class="err">✖️ תשובה: '+item.a+'</span>'; }
          block.appendChild(result);
        });
        const scoreLine = document.createElement('div'); scoreLine.style.marginTop='8px';
        scoreLine.innerHTML = '<b>ציון: '+correct+'/'+total+'</b>';
        form.appendChild(scoreLine);
        // Save best score
        const best = JSON.parse(localStorage.getItem(LS_KEYS.SCORE) || '0');
        if(correct>best){ localStorage.setItem(LS_KEYS.SCORE, JSON.stringify(correct)); }
        updateProgress();
      });
      container.appendChild(form);
      scrollIntoViewIfNeeded(container);
    }

    function scrollIntoViewIfNeeded(el){
      const r = el.getBoundingClientRect();
      if(r.top < 0 || r.bottom > window.innerHeight){ el.scrollIntoView({behavior:'smooth', block:'start'}); }
    }

    // initial load
    loadTasks();
  </script>
</body>
</html>
